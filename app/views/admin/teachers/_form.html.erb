<%= form_with(model: [:admin, teacher], class: "space-y-8 bg-white p-10 rounded-[2.5rem] shadow-sm border border-stone-100") do |f| %>
  
  <% if teacher.errors.any? %>
    <div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded-r-xl">
      <h2 class="text-red-800 font-bold text-sm">Please fix the following:</h2>
      <ul class="text-red-700 text-xs list-disc ml-5 mt-1">
        <% teacher.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <%= f.label :first_name, class: "block text-xs font-bold uppercase text-stone-500 mb-2 ml-1" %>
      <%= f.text_field :first_name, placeholder: "e.g. John", class: "w-full px-4 py-3 rounded-xl border border-stone-200 focus:ring-2 focus:ring-amber-500 outline-none transition-all" %>
    </div>
    <div>
      <%= f.label :last_name, class: "block text-xs font-bold uppercase text-stone-500 mb-2 ml-1" %>
      <%= f.text_field :last_name, placeholder: "e.g. Doe", class: "w-full px-4 py-3 rounded-xl border border-stone-200 focus:ring-2 focus:ring-amber-500 outline-none transition-all" %>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <%= f.label :email, class: "block text-xs font-bold uppercase text-stone-500 mb-2 ml-1" %>
      <%= f.email_field :email, placeholder: "teacher@school.com", class: "w-full px-4 py-3 rounded-xl border border-stone-200 focus:ring-2 focus:ring-amber-500 outline-none" %>
    </div>
    <div>
      <%= f.label :id_number, "TSC / ID Number", class: "block text-xs font-bold uppercase text-stone-500 mb-2 ml-1" %>
      <%= f.text_field :id_number, placeholder: "T-12345", class: "w-full px-4 py-3 rounded-xl border border-stone-200 focus:ring-2 focus:ring-amber-500 outline-none" %>
    </div>
  </div>

  <div class="pt-6 border-t border-stone-50">
    <h3 class="text-sm font-bold text-stone-700 mb-4">Initial Teaching Assignments</h3>
    <div class="space-y-4">
      <%= f.fields_for :teaching_assignments do |assignment_form| %>
        <div class="grid grid-cols-1 md:grid-cols-11 gap-4 items-end bg-stone-50 p-4 rounded-2xl">
          <div class="md:col-span-5">
            <%= assignment_form.label :subject_id, "Subject", class: "block text-[10px] font-bold uppercase text-stone-400 mb-1 ml-1" %>
            <%= assignment_form.collection_select :subject_id, Subject.all, :id, :name, { prompt: "Select Subject" }, { class: "w-full px-4 py-3 rounded-xl border border-stone-200 bg-white text-sm" } %>
          </div>
          <div class="md:col-span-5">
            <%= assignment_form.label :class_room_id, "Grade & Stream", class: "block text-[10px] font-bold uppercase text-stone-400 mb-1 ml-1" %>
            <%= assignment_form.collection_select :class_room_id, ClassRoom.includes(:level).all, :id, :grade_and_stream, { prompt: "Select Grade & Stream" }, { class: "w-full px-4 py-3 rounded-xl border border-stone-200 bg-white text-sm" } %>
          </div>
          <div class="md:col-span-1 flex items-center justify-center pb-3">
             <% if assignment_form.object.persisted? %>
               <%= assignment_form.check_box :_destroy, class: "h-5 w-5 text-red-500 border-stone-200 rounded" %>
             <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <div class="pt-6 border-t border-stone-50 flex items-center justify-between">
    <p class="text-xs text-stone-400 italic">Teacher credentials will be sent to the email provided.</p>
    <%= f.submit teacher.new_record? ? "Register Teacher" : "Update Profile", class: "bg-stone-900 text-white px-10 py-4 rounded-2xl font-bold hover:bg-stone-800 transition-all shadow-lg" %>
  </div>
<% end %>